version: "3.8"

services:
  radarr:
    image: "lscr.io/linuxserver/radarr:latest"
    container_name: "radarr"
    restart: "unless-stopped"
    environment:
      - "PUID=1000"
      - "PGID=1000"
      - "TZ=Pacific/Auckland"
    volumes:
      - "${CONFIG_FOLDER}/radarr:/config"
      - "${MOVIES_FOLDER}:/movies"
      - "${DOWNLOADS_FOLDER}:/downloads"
    expose:
      - "7878"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.radarr.entrypoints=web"
      - "traefik.http.routers.radarr.rule=Host(`radarr.tqid.dev`)"

  sonarr:
    image: "lscr.io/linuxserver/sonarr:latest"
    container_name: "sonarr"
    restart: "unless-stopped"
    environment:
      - "PUID=1000"
      - "PGID=1000"
      - "TZ=Pacific/Auckland"
    volumes:
      - "${CONFIG_FOLDER}/sonarr:/config"
      - "${TV_FOLDER}:/tv"
      - "${DOWNLOADS_FOLDER}:/downloads"
    expose:
      - "8989"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.sonarr.entrypoints=web"
      - "traefik.http.routers.sonarr.rule=Host(`sonarr.tqid.dev`)"

  prowlarr:
    image: "lscr.io/linuxserver/prowlarr:latest"
    container_name: "prowlarr"
    restart: "unless-stopped"
    environment:
      - "PUID=1000"
      - "PGID=1000"
      - "TZ=Pacific/Auckland"
    volumes:
      - "${CONFIG_FOLDER}/prowlarr:/config"
    expose:
      - "9696"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.prowlarr.entrypoints=web"
      - "traefik.http.routers.prowlarr.rule=Host(`prowlarr.tqid.dev`)"

  qbittorrent:
    image: "lscr.io/linuxserver/qbittorrent:latest"
    container_name: "qbittorrent"
    restart: "unless-stopped"
    environment:
      - "PUID=1000"
      - "PGID=1000"
      - "TZ=Pacific/Auckland"
      - "WEBUI_PORT=8080"
    volumes:
      - "${CONFIG_FOLDER}/qbittorrent:/config"
      - "${DOWNLOADS_FOLDER}:/downloads"
    expose:
      - "8080"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.qbittorrent.entrypoints=web"
      - "traefik.http.routers.qbittorrent.rule=Host(`qbittorrent.tqid.dev`)"
      - "traefik.http.services.qbittorrent.loadbalancer.server.port=8080"

  jellyfin:
    image: "lscr.io/linuxserver/jellyfin:latest"
    container_name: "jellyfin"
    restart: "unless-stopped"
    environment:
      - "PUID=1000"
      - "PGID=1000"
      - "TZ=Pacific/Auckland"
      - "JELLYFIN_PublishedServerUrl=https://jellyfin.tqid.dev" #optional
    devices:
      - "/dev/dri:/dev/dri"
    volumes:
      - "${CONFIG_FOLDER}/jellyfin:/config"
      - "${MOVIES_FOLDER}:/data/movies"
      - "${TV_FOLDER}:/data/tv"
#    ports:
#      - 8096:8096
#      - 8920:8920 #optional
#      - 7359:7359/udp #optional
#      - 1900:1900/udp #optional
    expose:
      - "8096"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.jellyfin.entrypoints=web"
      - "traefik.http.routers.jellyfin.rule=Host(`jellyfin.tqid.dev`)"

  requestrr:
    image: "thomst08/requestrr"
    container_name: "requestrr"
    restart: "unless-stopped"
    environment:
#      - "PUID=1000"
#      - "PGID=1000"
      - "TZ=Pacific/Auckland"
    volumes:
      - "${CONFIG_FOLDER}/requestrr:/root/config"
    expose:
      - "4545"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.requestrr.entrypoints=web"
      - "traefik.http.routers.requestrr.rule=Host(`requestrr.tqid.dev`)"

networks:
  default: